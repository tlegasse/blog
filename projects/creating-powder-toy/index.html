<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Creating Powder Toy | Tanner Legasse</title>
<meta name=keywords content="project"><meta name=description content="Introduction
Powder toy (also known as a falling sand game), for those not familiar, is an sandbox like simulation game where the user is generally free to experiment with various materials which can interact together or sometimes on their own. Some of the game-play mechanics have found their way into public consciousness through games like Noita, a popular rogue-like game with realistic material interactions. As an example of how these games generally play, you can check out the video below."><meta name=author content><link rel=canonical href=https://www.tannerlegasse.com/projects/creating-powder-toy/><link crossorigin=anonymous href=/assets/css/stylesheet.2d0a69861a909a9b89c45ecc99f9122be78627c967d6e5faf8f03580f21858f6.css integrity="sha256-LQpphhqQmpuJxF7MmfkSK+eGJ8ln1uX6+PA1gPIYWPY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.tannerlegasse.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.tannerlegasse.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.tannerlegasse.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.tannerlegasse.com/apple-touch-icon.png><link rel=mask-icon href=https://www.tannerlegasse.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.tannerlegasse.com/projects/creating-powder-toy/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-73381DKG18"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-73381DKG18")}</script><meta property="og:url" content="https://www.tannerlegasse.com/projects/creating-powder-toy/"><meta property="og:site_name" content="Tanner Legasse"><meta property="og:title" content="Creating Powder Toy"><meta property="og:description" content="Introduction Powder toy (also known as a falling sand game), for those not familiar, is an sandbox like simulation game where the user is generally free to experiment with various materials which can interact together or sometimes on their own. Some of the game-play mechanics have found their way into public consciousness through games like Noita, a popular rogue-like game with realistic material interactions. As an example of how these games generally play, you can check out the video below."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2024-01-31T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-31T00:00:00+00:00"><meta property="article:tag" content="Project"><meta property="og:image" content="https://www.tannerlegasse.com/images/powder-toy.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.tannerlegasse.com/images/powder-toy.webp"><meta name=twitter:title content="Creating Powder Toy"><meta name=twitter:description content="Introduction
Powder toy (also known as a falling sand game), for those not familiar, is an sandbox like simulation game where the user is generally free to experiment with various materials which can interact together or sometimes on their own. Some of the game-play mechanics have found their way into public consciousness through games like Noita, a popular rogue-like game with realistic material interactions. As an example of how these games generally play, you can check out the video below."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://www.tannerlegasse.com/projects/"},{"@type":"ListItem","position":2,"name":"Creating Powder Toy","item":"https://www.tannerlegasse.com/projects/creating-powder-toy/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Creating Powder Toy","name":"Creating Powder Toy","description":"Introduction Powder toy (also known as a falling sand game), for those not familiar, is an sandbox like simulation game where the user is generally free to experiment with various materials which can interact together or sometimes on their own. Some of the game-play mechanics have found their way into public consciousness through games like Noita, a popular rogue-like game with realistic material interactions. As an example of how these games generally play, you can check out the video below.\n","keywords":["project"],"articleBody":"Introduction Powder toy (also known as a falling sand game), for those not familiar, is an sandbox like simulation game where the user is generally free to experiment with various materials which can interact together or sometimes on their own. Some of the game-play mechanics have found their way into public consciousness through games like Noita, a popular rogue-like game with realistic material interactions. As an example of how these games generally play, you can check out the video below.\nI remember running powder toy games back in middle school in MS-DOS, and was endlessly impressed with its smooth operation and engaging gameplay mechanics. Maybe there‚Äôs even an argument to make that it‚Äôs one of the quintessential games-with-no-end in the same way that Minecraft used to be. It‚Äôs just a toy! A powder toy!\nWhat is Powder Toy? Surprising, right? We already talked about this! Actually for the purposes of this article, let‚Äôs jump into the specific mechanics of the game, but first a bit about its lineage. Powder toy actually shares a lot of similar characteristics of an older game, Conway‚Äôs Game of Life (GOL). Both of these (and others like them) are cellular automata, cells are a determined state, and have rules that they abide by in interacting with their environment.\nA Cellular‚Ä¶ what? Now, this may sound complex, but the beauty of cellular automata is that it‚Äôs surprisingly simple, I promise you‚Äôll get it. This is how Life works:\nThe world is represented by a 2 dimensional array of ‚Äúcells‚Äù. The game world ticks forward one turn at a time. A cell is either alive or dead. A cell has neighbors. A cell comes to life if it has just the right amount of neighbors. A cell can‚Äôt do the life thing if it has too many neighbors, or too few neighbors. A ce‚Ä¶ wait‚Ä¶ that‚Äôs it. That‚Äôs all of the rules. Bonus: check out the GOL I whipped up while flying to New York. Just hit play üòÅ\nSee the Pen Tanner's game of life by Tanner Legasse (@tlegasse) on CodePen. Okay, so GOL is about as simple as you can get while still being interactive. There‚Äôs some more aspects to consider, and more fundamental mechanisms by which cellular environments can be simulated (Elementary Cellular Automaton), but for our purposes, we‚Äôre going to skip ahead. Spend some time digging if you want more good reading!\nWhat makes Powder Toy different? If you‚Äôre content with GOL, congrats, go back up and have fun. Some, however, want a more compelling and realistic experience, so the question becomes ‚Äúwhat?‚Äù and ‚Äúhow?‚Äù. previously, the data structure was exceedingly simple. One set of rules apply to the only cell type in the game, and most of the cell‚Äôs data consists of the following (this is the constructor of my GOL Cell class):\nconstructor(x, y) { let isAlive = Math.floor(Math.random() * 2) this.x = x this.y = y this.alive = isAlive ... } As you can see, we just need to know X and Y, as well as the cell‚Äôs alive status. Everything else in the constructor is related to keeping that data up to date, but that‚Äôs it. If you had a cell that couldn‚Äôt die, couldn‚Äôt be interacted with and was always alive, you‚Äôd have a wall. A different material type, but very similar. If you had one type of cell that could interact with another cell that converted either/or to an area of high pressure and temperature, you‚Äôd have fire and gasoline. Those work differently, you could imagine gas being quickly taken over in a series of turns, and moving gradually away from high pressure zones. You could imagine the fire not going away, and responding to gravity; that‚Äôs stuff we usually call lava. What happens when you mix dirt, water and seeds? Plants!\nAt the end of the day/ experiment, the simplicity derived from cells interacting together represents a fun toy, and an even more enjoyable software writing experience.\nGoals I‚Äôm going to be recreating some of the functionality of powder toy using Go. It is in some ways a non-natural way to leverage Go‚Äôs robust strengths, however this project will be killing 2 birds with one stone. I‚Äôll be leveraging Go‚Äôs ability to compile to WASM (WebAssembly), and some interesting tools to pull in and serve the build packages. It‚Äôll be only as simple as it can be to serve its purpose, and I‚Äôll be hosting the finished product, after a few follow up articles, right here, so stay tuned and let me know how you end up liking the process!\n","wordCount":"764","inLanguage":"en","image":"https://www.tannerlegasse.com/images/powder-toy.webp","datePublished":"2024-01-31T00:00:00Z","dateModified":"2024-01-31T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.tannerlegasse.com/projects/creating-powder-toy/"},"publisher":{"@type":"Organization","name":"Tanner Legasse","logo":{"@type":"ImageObject","url":"https://www.tannerlegasse.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.tannerlegasse.com/ accesskey=h title="Tanner Legasse (Alt + H)">Tanner Legasse</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.tannerlegasse.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://github.com/tlegasse title><span><span class="social-icon github-icon"></span></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/tanner-legasse/ title><span><span class="social-icon linkedin-icon"></span></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.tannerlegasse.com/>Home</a>&nbsp;¬ª&nbsp;<a href=https://www.tannerlegasse.com/projects/>Projects</a></div><h1 class="post-title entry-hint-parent">Creating Powder Toy</h1><div class=post-meta><span title='2024-01-31 00:00:00 +0000 UTC'>January 31, 2024</span></div></header><figure class=entry-cover><img loading=eager src=https://www.tannerlegasse.com/images/powder-toy.webp alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#what-is-powder-toy aria-label="What is Powder Toy?">What is Powder Toy?</a><ul><li><a href=#a-cellular-what aria-label="A Cellular&mldr; what?">A Cellular&mldr; what?</a></li><li><a href=#what-makes-powder-toy-different aria-label="What makes Powder Toy different?">What makes Powder Toy different?</a></li></ul></li><li><a href=#goals aria-label=Goals>Goals</a></li></ul></div></details></div><div class=post-content><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>Powder toy (also known as a falling sand game), for those not familiar, is an sandbox like simulation game where the user is generally free to experiment with various materials which can interact together or sometimes on their own. Some of the game-play mechanics have found their way into public consciousness through games like <a href=https://en.wikipedia.org/wiki/Noita_%28video_game%29>Noita</a>, a popular rogue-like game with realistic material interactions. As an example of how these games generally play, you can check out the video below.</p><iframe width=100% height=315 src="https://www.youtube.com/embed/LGbjdJO04H8?si=cFLjZj7RGq6ZDR5E&mute=1" title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><hr><p>I remember running powder toy games back in middle school in MS-DOS, and was endlessly impressed with its smooth operation and engaging gameplay mechanics. Maybe there&rsquo;s even an argument to make that it&rsquo;s one of the quintessential games-with-no-end in the same way that Minecraft used to be. It&rsquo;s just a toy! A powder toy!</p><h1 id=what-is-powder-toy>What is Powder Toy?<a hidden class=anchor aria-hidden=true href=#what-is-powder-toy>#</a></h1><p>Surprising, right? We already talked about this! Actually for the purposes of this article, let&rsquo;s jump into the specific mechanics of the game, but first a bit about its lineage. Powder toy actually shares a lot of similar characteristics of an older game, <a href=https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life>Conway&rsquo;s Game of Life</a> (GOL). Both of these (and others like them) are cellular automata, cells are a determined state, and have rules that they abide by in interacting with their environment.</p><h2 id=a-cellular-what>A Cellular&mldr; what?<a hidden class=anchor aria-hidden=true href=#a-cellular-what>#</a></h2><p>Now, this may sound complex, but the beauty of cellular automata is that it&rsquo;s surprisingly simple, I promise you&rsquo;ll get it. This is how Life works:</p><ul><li>The world is represented by a 2 dimensional array of &ldquo;cells&rdquo;.</li><li>The game world ticks forward one turn at a time.</li><li>A cell is either alive or dead.</li><li>A cell has neighbors.</li><li>A cell comes to life if it has just the right amount of neighbors.</li><li>A cell can&rsquo;t do the life thing if it has too many neighbors, or too few neighbors.</li><li>A ce&mldr; wait&mldr; that&rsquo;s it. That&rsquo;s <strong>all</strong> of the rules.</li></ul><p><em>Bonus: check out the GOL I whipped up while flying to New York. Just hit play</em> üòÅ</p><p class=codepen data-height=700 data-default-tab=result data-slug-hash=oeGVjb data-user=tlegasse style="height:700px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;border:2px solid;margin:1em 0;padding:1em"><span>See the Pen <a href=https://codepen.io/tlegasse/pen/oeGVjb>Tanner's game of life</a> by Tanner Legasse (<a href=https://codepen.io/tlegasse>@tlegasse</a>)
on <a href=https://codepen.io>CodePen</a>.</span></p><script async src=https://cpwebassets.codepen.io/assets/embed/ei.js></script><hr><p>Okay, so GOL is about as simple as you can get while still being interactive. There&rsquo;s some more aspects to consider, and more fundamental mechanisms by which cellular environments can be simulated (<a href=https://en.wikipedia.org/wiki/Elementary_cellular_automaton>Elementary Cellular Automaton</a>), but for our purposes, we&rsquo;re going to skip ahead. Spend some time digging if you want more good reading!</p><h2 id=what-makes-powder-toy-different>What makes Powder Toy different?<a hidden class=anchor aria-hidden=true href=#what-makes-powder-toy-different>#</a></h2><p>If you&rsquo;re content with GOL, congrats, go back up and have fun. Some, however, want a more compelling and realistic experience, so the question becomes &ldquo;what?&rdquo; and &ldquo;how?&rdquo;. previously, the data structure was exceedingly simple. One set of rules apply to the only cell type in the game, and most of the cell&rsquo;s data consists of the following (this is the constructor of my GOL Cell class):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>constructor</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>let</span> <span class=nx>isAlive</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>x</span> <span class=o>=</span> <span class=nx>x</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>y</span> <span class=o>=</span> <span class=nx>y</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>alive</span> <span class=o>=</span> <span class=nx>isAlive</span>
</span></span><span class=line><span class=cl>	<span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>As you can see, we just need to know X and Y, as well as the cell&rsquo;s alive status. Everything else in the constructor is related to keeping that data up to date, but that&rsquo;s it. If you had a cell that couldn&rsquo;t die, couldn&rsquo;t be interacted with and was always alive, you&rsquo;d have a wall. A different material type, but very similar. If you had one type of cell that could interact with another cell that converted either/or to an area of high pressure and temperature, you&rsquo;d have fire and gasoline. Those work differently, you could imagine gas being quickly taken over in a series of turns, and moving gradually <strong>away</strong> from high pressure zones. You could imagine the fire not going away, and responding to gravity; that&rsquo;s stuff we usually call lava. What happens when you mix dirt, water and seeds? Plants!</p><p>At the end of the day/ experiment, the simplicity derived from cells interacting together represents a fun toy, and an even more enjoyable software writing experience.</p><h1 id=goals>Goals<a hidden class=anchor aria-hidden=true href=#goals>#</a></h1><p>I&rsquo;m going to be recreating some of the functionality of powder toy using Go. It is in some ways a non-natural way to leverage Go&rsquo;s robust strengths, however this project will be killing 2 birds with one stone. I&rsquo;ll be leveraging Go&rsquo;s ability to compile to WASM (WebAssembly), and some interesting tools to pull in and serve the build packages. It&rsquo;ll be only as simple as it can be to serve its purpose, and I&rsquo;ll be hosting the finished product, after a few follow up articles, right here, so stay tuned and let me know how you end up liking the process!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.tannerlegasse.com/tags/project/>Project</a></li></ul><nav class=paginav><a class=next href=https://www.tannerlegasse.com/projects/go-url-shortener/><span class=title>Next ¬ª</span><br><span>Go URL Shortener</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//tannerlegasse.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.tannerlegasse.com/>Tanner Legasse</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>