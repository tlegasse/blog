<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Go URL Shortener - Tanner Legasse</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/bridge.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-73381DKG18"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-73381DKG18")}</script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Tanner Legasse" rel=home><div class="logo__item logo__text"><div class=logo__title><div class=logo__item-inner>Tanner <span>Legasse</span></div></div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/search/><span class=menu__text>Search</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Go URL Shortener</h1></header><div class="content post__content clearfix"><h1 id=introduction>Introduction</h1><p>It&rsquo;s 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is <em>exactly</em> what you need. Okay, kidding aside, this thing isn&rsquo;t geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I&rsquo;ve picked up over the past several months in my learning journey with Go. It&rsquo;s been really fun, and this project fit the bill of &ldquo;complex enough to be interesting, not so complex that you program yourself into a hole&rdquo;. The latter will come shortly, but for now I&rsquo;m really pleased with how everything&rsquo;s come out.</p><p><strong>Note: This code is still evolving, it may change over the next several weeks</strong></p><h1 id=features>Features</h1><p>The URL shortener only has 2 routes for now, one capturing <code>GET</code> requests for the shortening process, and a dynamic path for long-ening the path again. That&rsquo;s it. Really. BUT there were so many amazing things that this project exposed me to. My previous Go projects were Leetcode problems, so I was missing on a lot of the project-level learnings.</p><h2 id=things-learned>Things learned</h2><p>Implementing this functionality was a treat. It exposed me to some common patterns and enabled me to learn about the ins and outs, and infrastructure of Go projects. Check out some of my favorite discoveries below.</p><h3 id=testing>Testing</h3><p>Unit testing admittedly isn&rsquo;t every agency or company&rsquo;s top priority, and I have had some ground to make up. Now, in every project I embark on, I aim to provide thoroughly tested code. In this case, I was exposed to database and HTTP server mocking, test fixtures and more. I found the workflow to be intuitive and very helpful in rounding out my chosen feature set.</p><h3 id=http-server>HTTP Server</h3><p>While the batteries included approach to the Golang standard library means that it comes with a competent and simple HTTP server, it wasn&rsquo;t a mistake that I chose to work with it. I wanted to ensure that my plans of picking up API related tooling experience was in focus during this project.</p><h2 id=challenges>Challenges</h2><h3 id=embedding>Embedding:</h3><p>This is the big one, and seems to fly under the radar in terms of what Go developers are exposed to first. But first, what problem will the embedding pattern solve? In short, when you&rsquo;re running unit tests, the execution directory, and packages compiled into the binary are different than when you&rsquo;re running your program normally. You might be able to leverage relative pathing fairly easily when your code is running from the top level directory. When you&rsquo;re testing though&mldr; ooh momma&mldr; the filesystem context changes drastically. In the code below, you can see how I&rsquo;m leveraging the <code>embed</code> package to compile the SQL statements needed to spin up my database table <em>directly into the binary</em>. Now, there are many approaches to solving this problem, and embedding files can definitely be a mistake, but in this case it was just what the doctor ordered.</p><p>First, import the sucker.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;embed&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>Using the <code>go:embed</code> directive, we then specify a pattern to match to the local filesystem, and initialize a variable with the</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=c1>//go:embed schema.sql</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>schemaFS</span> <span class=nx>embed</span><span class=p>.</span><span class=nx>FS</span>
</span></span></code></pre></div><p>And then we can use the embedded file just like we would with a normal file!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=nx>content</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>schemaFS</span><span class=p>.</span><span class=nf>ReadFile</span><span class=p>(</span><span class=s>&#34;schema.sql&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=understanding-the-data-flow>Understanding the data flow</h3><p>I will admit, dependency injection is an extremely important software design pattern as it allows for a the kind of modularity that makes huge successful projects a possibility, but it can cause issues if you&rsquo;re a beginner exploring new programming languages. In this case, it was a difference between technologies I&rsquo;m used to programming in (JavaScript), and Go. What could that be? Call by value.</p><p>Yes, this is a n00b issue, and was the result of storing data in structs within packages, and it tripped me up relentlessly. There would be issues where my database mock wasn&rsquo;t being referenced and called for pattern matching, or data wasn&rsquo;t flowing the way I expected, but I got through it. In hindsight, this one seems pretty silly, bit I&rsquo;m genuinely glad that it came up so prevalantly in this project, because this is just one of those things you need to develop a sort of muscle memory for.</p><h1 id=technologies-used>Technologies Used</h1><ul><li><a href=https://github.com/mattn/go-sqlite3>Viper</a>: Parses a wide range of configuration file formats.</li><li><a href=https://github.com/mattn/go-sqlite3>Sqlite3 driver</a>: Helped me drive the database.</li><li><a href=https://github.com/DATA-DOG/go-sqlmock>Go-Sqlmock</a>: My favorite new package. I was genuinely surprised with how intuitive and fun the workflow with go-sqlmock was, seriously! You get to spin up a mock SQL driver, pass it to a function or declare a variable with it, and it pattern matches requests, returning pre-defined results.</li></ul><h1 id=conclusions>Conclusions</h1><p>I encourage you to go check out the <a href=https://github.com/tlegasse/url-shortener/>code</a>, because it was a lot of fun to write. This project was primarily focused on the how&rsquo;s, why&rsquo;s, and the most basic of basics, but the next project may (or may not!) have more real world applications, so stay tuned for more ðŸ˜‰</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/project/ rel=tag>project</a></li></ul></div></footer></article></main><section class="fullwidth comments"><script src=https://giscus.app/client.js data-repo=tlegasse/blog data-repo-id=R_kgDOK_uaeA data-category=General data-category-id=DIC_kwDOK_uaeM4CpnXB data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=https://tannerlegasse.com/css/giscuss.css data-lang=en data-loading=lazy crossorigin=anonymous async></script></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Tanner Legasse.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>