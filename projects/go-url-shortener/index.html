<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Go URL Shortener | Tanner Legasse</title>
<meta name=keywords content="project"><meta name=description content="Introduction
It&rsquo;s 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is exactly what you need. Okay, kidding aside, this thing isn&rsquo;t geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I&rsquo;ve picked up over the past several months in my learning journey with Go. It&rsquo;s been really fun, and this project fit the bill of &ldquo;complex enough to be interesting, not so complex that you program yourself into a hole&rdquo;. The latter will come shortly, but for now I&rsquo;m really pleased with how everything&rsquo;s come out."><meta name=author content><link rel=canonical href=https://www.tannerlegasse.com/projects/go-url-shortener/><link crossorigin=anonymous href=/assets/css/stylesheet.2d0a69861a909a9b89c45ecc99f9122be78627c967d6e5faf8f03580f21858f6.css integrity="sha256-LQpphhqQmpuJxF7MmfkSK+eGJ8ln1uX6+PA1gPIYWPY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.tannerlegasse.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.tannerlegasse.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.tannerlegasse.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.tannerlegasse.com/apple-touch-icon.png><link rel=mask-icon href=https://www.tannerlegasse.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.tannerlegasse.com/projects/go-url-shortener/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-73381DKG18"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-73381DKG18")}</script><meta property="og:url" content="https://www.tannerlegasse.com/projects/go-url-shortener/"><meta property="og:site_name" content="Tanner Legasse"><meta property="og:title" content="Go URL Shortener"><meta property="og:description" content="Introduction It‚Äôs 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is exactly what you need. Okay, kidding aside, this thing isn‚Äôt geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I‚Äôve picked up over the past several months in my learning journey with Go. It‚Äôs been really fun, and this project fit the bill of ‚Äúcomplex enough to be interesting, not so complex that you program yourself into a hole‚Äù. The latter will come shortly, but for now I‚Äôm really pleased with how everything‚Äôs come out."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2024-01-17T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-17T00:00:00+00:00"><meta property="article:tag" content="Project"><meta property="og:image" content="https://www.tannerlegasse.com/images/go-url-redirect-post.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.tannerlegasse.com/images/go-url-redirect-post.webp"><meta name=twitter:title content="Go URL Shortener"><meta name=twitter:description content="Introduction
It&rsquo;s 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is exactly what you need. Okay, kidding aside, this thing isn&rsquo;t geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I&rsquo;ve picked up over the past several months in my learning journey with Go. It&rsquo;s been really fun, and this project fit the bill of &ldquo;complex enough to be interesting, not so complex that you program yourself into a hole&rdquo;. The latter will come shortly, but for now I&rsquo;m really pleased with how everything&rsquo;s come out."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://www.tannerlegasse.com/projects/"},{"@type":"ListItem","position":2,"name":"Go URL Shortener","item":"https://www.tannerlegasse.com/projects/go-url-shortener/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Go URL Shortener","name":"Go URL Shortener","description":"Introduction It\u0026rsquo;s 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is exactly what you need. Okay, kidding aside, this thing isn\u0026rsquo;t geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I\u0026rsquo;ve picked up over the past several months in my learning journey with Go. It\u0026rsquo;s been really fun, and this project fit the bill of \u0026ldquo;complex enough to be interesting, not so complex that you program yourself into a hole\u0026rdquo;. The latter will come shortly, but for now I\u0026rsquo;m really pleased with how everything\u0026rsquo;s come out.\n","keywords":["project"],"articleBody":"Introduction It‚Äôs 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is exactly what you need. Okay, kidding aside, this thing isn‚Äôt geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I‚Äôve picked up over the past several months in my learning journey with Go. It‚Äôs been really fun, and this project fit the bill of ‚Äúcomplex enough to be interesting, not so complex that you program yourself into a hole‚Äù. The latter will come shortly, but for now I‚Äôm really pleased with how everything‚Äôs come out.\nNote: This code is still evolving, it may change over the next several weeks\nFeatures The URL shortener only has 2 routes for now, one capturing GET requests for the shortening process, and a dynamic path for long-ening the path again. That‚Äôs it. Really. BUT there were so many amazing things that this project exposed me to. My previous Go projects were Leetcode problems, so I was missing on a lot of the project-level learnings.\nThings learned Implementing this functionality was a treat. It exposed me to some common patterns and enabled me to learn about the ins and outs, and infrastructure of Go projects. Check out some of my favorite discoveries below.\nTesting Unit testing admittedly isn‚Äôt every agency or company‚Äôs top priority, and I have had some ground to make up. Now, in every project I embark on, I aim to provide thoroughly tested code. In this case, I was exposed to database and HTTP server mocking, test fixtures and more. I found the workflow to be intuitive and very helpful in rounding out my chosen feature set.\nHTTP Server While the batteries included approach to the Golang standard library means that it comes with a competent and simple HTTP server, it wasn‚Äôt a mistake that I chose to work with it. I wanted to ensure that my plans of picking up API related tooling experience was in focus during this project.\nChallenges Embedding: This is the big one, and seems to fly under the radar in terms of what Go developers are exposed to first. But first, what problem will the embedding pattern solve? In short, when you‚Äôre running unit tests, the execution directory, and packages compiled into the binary are different than when you‚Äôre running your program normally. You might be able to leverage relative pathing fairly easily when your code is running from the top level directory. When you‚Äôre testing though‚Ä¶ ooh momma‚Ä¶ the filesystem context changes drastically. In the code below, you can see how I‚Äôm leveraging the embed package to compile the SQL statements needed to spin up my database table directly into the binary. Now, there are many approaches to solving this problem, and embedding files can definitely be a mistake, but in this case it was just what the doctor ordered.\nFirst, import the sucker.\nimport ( ... \"embed\" ... ) Using the go:embed directive, we then specify a pattern to match to the local filesystem, and initialize a variable with the\n//go:embed schema.sql var schemaFS embed.FS And then we can use the embedded file just like we would with a normal file!\ncontent, err := schemaFS.ReadFile(\"schema.sql\") Understanding the data flow I will admit, dependency injection is an extremely important software design pattern as it allows for a the kind of modularity that makes huge successful projects a possibility, but it can cause issues if you‚Äôre a beginner exploring new programming languages. In this case, it was a difference between technologies I‚Äôm used to programming in (JavaScript), and Go. What could that be? Call by value.\nYes, this is a n00b issue, and was the result of storing data in structs within packages, and it tripped me up relentlessly. There would be issues where my database mock wasn‚Äôt being referenced and called for pattern matching, or data wasn‚Äôt flowing the way I expected, but I got through it. In hindsight, this one seems pretty silly, bit I‚Äôm genuinely glad that it came up so prevalantly in this project, because this is just one of those things you need to develop a sort of muscle memory for.\nTechnologies Used Viper: Parses a wide range of configuration file formats. Sqlite3 driver: Helped me drive the database. Go-Sqlmock: My favorite new package. I was genuinely surprised with how intuitive and fun the workflow with go-sqlmock was, seriously! You get to spin up a mock SQL driver, pass it to a function or declare a variable with it, and it pattern matches requests, returning pre-defined results. Conclusions I encourage you to go check out the code, because it was a lot of fun to write. This project was primarily focused on the how‚Äôs, why‚Äôs, and the most basic of basics, but the next project may (or may not!) have more real world applications, so stay tuned for more üòâ\n","wordCount":"828","inLanguage":"en","image":"https://www.tannerlegasse.com/images/go-url-redirect-post.webp","datePublished":"2024-01-17T00:00:00Z","dateModified":"2024-01-17T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.tannerlegasse.com/projects/go-url-shortener/"},"publisher":{"@type":"Organization","name":"Tanner Legasse","logo":{"@type":"ImageObject","url":"https://www.tannerlegasse.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.tannerlegasse.com/ accesskey=h title="Tanner Legasse (Alt + H)">Tanner Legasse</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.tannerlegasse.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://github.com/tlegasse title><span><span class="social-icon github-icon"></span></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/tanner-legasse/ title><span><span class="social-icon linkedin-icon"></span></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.tannerlegasse.com/>Home</a>&nbsp;¬ª&nbsp;<a href=https://www.tannerlegasse.com/projects/>Projects</a></div><h1 class="post-title entry-hint-parent">Go URL Shortener</h1><div class=post-meta><span title='2024-01-17 00:00:00 +0000 UTC'>January 17, 2024</span></div></header><figure class=entry-cover><img loading=eager src=https://www.tannerlegasse.com/images/go-url-redirect-post.webp alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#features aria-label=Features>Features</a><ul><li><a href=#things-learned aria-label="Things learned">Things learned</a><ul><li><a href=#testing aria-label=Testing>Testing</a></li><li><a href=#http-server aria-label="HTTP Server">HTTP Server</a></li></ul></li><li><a href=#challenges aria-label=Challenges>Challenges</a><ul><li><a href=#embedding aria-label=Embedding:>Embedding:</a></li><li><a href=#understanding-the-data-flow aria-label="Understanding the data flow">Understanding the data flow</a></li></ul></li></ul></li><li><a href=#technologies-used aria-label="Technologies Used">Technologies Used</a></li><li><a href=#conclusions aria-label=Conclusions>Conclusions</a></li></ul></div></details></div><div class=post-content><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>It&rsquo;s 3AM. You need a URL shortener fast. Your boss is breathing down your neck and you have no idea what to do. My new URL shortener is <em>exactly</em> what you need. Okay, kidding aside, this thing isn&rsquo;t geared toward production environments with high throughput or anything like that. Instead, the goal was to showcase skills that I&rsquo;ve picked up over the past several months in my learning journey with Go. It&rsquo;s been really fun, and this project fit the bill of &ldquo;complex enough to be interesting, not so complex that you program yourself into a hole&rdquo;. The latter will come shortly, but for now I&rsquo;m really pleased with how everything&rsquo;s come out.</p><p><strong>Note: This code is still evolving, it may change over the next several weeks</strong></p><h1 id=features>Features<a hidden class=anchor aria-hidden=true href=#features>#</a></h1><p>The URL shortener only has 2 routes for now, one capturing <code>GET</code> requests for the shortening process, and a dynamic path for long-ening the path again. That&rsquo;s it. Really. BUT there were so many amazing things that this project exposed me to. My previous Go projects were Leetcode problems, so I was missing on a lot of the project-level learnings.</p><h2 id=things-learned>Things learned<a hidden class=anchor aria-hidden=true href=#things-learned>#</a></h2><p>Implementing this functionality was a treat. It exposed me to some common patterns and enabled me to learn about the ins and outs, and infrastructure of Go projects. Check out some of my favorite discoveries below.</p><h3 id=testing>Testing<a hidden class=anchor aria-hidden=true href=#testing>#</a></h3><p>Unit testing admittedly isn&rsquo;t every agency or company&rsquo;s top priority, and I have had some ground to make up. Now, in every project I embark on, I aim to provide thoroughly tested code. In this case, I was exposed to database and HTTP server mocking, test fixtures and more. I found the workflow to be intuitive and very helpful in rounding out my chosen feature set.</p><h3 id=http-server>HTTP Server<a hidden class=anchor aria-hidden=true href=#http-server>#</a></h3><p>While the batteries included approach to the Golang standard library means that it comes with a competent and simple HTTP server, it wasn&rsquo;t a mistake that I chose to work with it. I wanted to ensure that my plans of picking up API related tooling experience was in focus during this project.</p><h2 id=challenges>Challenges<a hidden class=anchor aria-hidden=true href=#challenges>#</a></h2><h3 id=embedding>Embedding:<a hidden class=anchor aria-hidden=true href=#embedding>#</a></h3><p>This is the big one, and seems to fly under the radar in terms of what Go developers are exposed to first. But first, what problem will the embedding pattern solve? In short, when you&rsquo;re running unit tests, the execution directory, and packages compiled into the binary are different than when you&rsquo;re running your program normally. You might be able to leverage relative pathing fairly easily when your code is running from the top level directory. When you&rsquo;re testing though&mldr; ooh momma&mldr; the filesystem context changes drastically. In the code below, you can see how I&rsquo;m leveraging the <code>embed</code> package to compile the SQL statements needed to spin up my database table <em>directly into the binary</em>. Now, there are many approaches to solving this problem, and embedding files can definitely be a mistake, but in this case it was just what the doctor ordered.</p><p>First, import the sucker.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;embed&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>Using the <code>go:embed</code> directive, we then specify a pattern to match to the local filesystem, and initialize a variable with the</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=c1>//go:embed schema.sql</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>schemaFS</span> <span class=nx>embed</span><span class=p>.</span><span class=nx>FS</span>
</span></span></code></pre></div><p>And then we can use the embedded file just like we would with a normal file!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-golang data-lang=golang><span class=line><span class=cl><span class=nx>content</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>schemaFS</span><span class=p>.</span><span class=nf>ReadFile</span><span class=p>(</span><span class=s>&#34;schema.sql&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=understanding-the-data-flow>Understanding the data flow<a hidden class=anchor aria-hidden=true href=#understanding-the-data-flow>#</a></h3><p>I will admit, dependency injection is an extremely important software design pattern as it allows for a the kind of modularity that makes huge successful projects a possibility, but it can cause issues if you&rsquo;re a beginner exploring new programming languages. In this case, it was a difference between technologies I&rsquo;m used to programming in (JavaScript), and Go. What could that be? Call by value.</p><p>Yes, this is a n00b issue, and was the result of storing data in structs within packages, and it tripped me up relentlessly. There would be issues where my database mock wasn&rsquo;t being referenced and called for pattern matching, or data wasn&rsquo;t flowing the way I expected, but I got through it. In hindsight, this one seems pretty silly, bit I&rsquo;m genuinely glad that it came up so prevalantly in this project, because this is just one of those things you need to develop a sort of muscle memory for.</p><h1 id=technologies-used>Technologies Used<a hidden class=anchor aria-hidden=true href=#technologies-used>#</a></h1><ul><li><a href=https://github.com/mattn/go-sqlite3>Viper</a>: Parses a wide range of configuration file formats.</li><li><a href=https://github.com/mattn/go-sqlite3>Sqlite3 driver</a>: Helped me drive the database.</li><li><a href=https://github.com/DATA-DOG/go-sqlmock>Go-Sqlmock</a>: My favorite new package. I was genuinely surprised with how intuitive and fun the workflow with go-sqlmock was, seriously! You get to spin up a mock SQL driver, pass it to a function or declare a variable with it, and it pattern matches requests, returning pre-defined results.</li></ul><h1 id=conclusions>Conclusions<a hidden class=anchor aria-hidden=true href=#conclusions>#</a></h1><p>I encourage you to go check out the <a href=https://github.com/tlegasse/url-shortener/>code</a>, because it was a lot of fun to write. This project was primarily focused on the how&rsquo;s, why&rsquo;s, and the most basic of basics, but the next project may (or may not!) have more real world applications, so stay tuned for more üòâ</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.tannerlegasse.com/tags/project/>Project</a></li></ul><nav class=paginav><a class=prev href=https://www.tannerlegasse.com/projects/creating-powder-toy/><span class=title>¬´ Prev</span><br><span>Creating Powder Toy</span>
</a><a class=next href=https://www.tannerlegasse.com/posts/choosing-a-new-path/><span class=title>Next ¬ª</span><br><span>Go, and Why I'm Learning It</span></a></nav></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//tannerlegasse.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.tannerlegasse.com/>Tanner Legasse</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>